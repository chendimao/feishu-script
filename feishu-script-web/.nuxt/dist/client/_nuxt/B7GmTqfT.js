const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./BiuYIrBQ.js","./sq3K_qnO.js"])))=>i.map(i=>d[i]);
import{d as ce,o as ie,y as L,B as m,L as ue,z as p,C as f,E as x,g as v,W as de,x as y,F as pe,G as ge,I as R,D as U,A as S,k as O,_ as fe}from"./sq3K_qnO.js";import{_ as ve}from"./B9kDMttj.js";import{a as me,E as ye}from"./BOZUAO0b.js";import{a as he,b as we,c as _e,d as be,e as xe,E as Ue}from"./CUsBS2hm.js";import{E as d,a as Te,b as ke,c as Ee}from"./CaAO6jmF.js";import{E as $e}from"./Bue0N5W5.js";import{u as Ie}from"./DiYcBhFZ.js";import"./CckOn9TO.js";const Fe={class:"url-expander-plugin"},Le={key:0,class:"main-content"},Re={class:"operation-grid"},Se={class:"config-form"},Ce={class:"form-group"},De={class:"form-group"},Pe={key:0,class:"help-text warning"},Me={class:"form-group"},Ve={key:0,class:"form-group"},Ae={key:0,class:"preview-section"},Ke={class:"preview-header"},ze={class:"preview-stats"},je={class:"action-section"},Ne={class:"action-buttons"},Oe={key:0,class:"progress-section"},Be={class:"progress-info"},We={key:0},Xe=ce({__name:"url-expander-plugin",setup(Ge){Ie({title:"çŸ­é“¾æ¥æ‰©å±•å™¨ - å¤šç»´è¡¨æ ¼è„šæœ¬ç®¡ç†"});let g=null,I=null;const H=v(!1),D=v("æ­£åœ¨åˆå§‹åŒ–é£ä¹¦SDK..."),B=v(""),P=v(!1),V=v([]),M=v([]),w=v(""),T=v("inplace"),C=v("æ‰©å±•åé“¾æ¥"),K=v(""),_=v([]),z=v(0),j=v(0),A=v(0),b=v(0),F=v(!1),W=v(!1),X=v(!1),J=O(()=>(console.log("æ‰€æœ‰å­—æ®µ:",V.value),V.value.filter(o=>{const t=["Text","Url","SingleLineText","MultiLineText","RichText","Email","Phone","Link","Formula","Attachment","SingleLink","DuplexLink"].some(s=>o.type===s||o.type?.toString().toLowerCase().includes("text")||o.type?.toString().toLowerCase().includes("url")||o.type?.toString().toLowerCase().includes("link")||o.type?.toString().toLowerCase().includes("rich"));return console.log(`å­—æ®µ ${o.name} (${o.type}): ${t?"âœ“ å¯èƒ½åŒ…å«URL":"âœ— ä¸æ”¯æŒ"}`),t}))),Q=O(()=>z.value===0?0:Math.round(j.value/z.value*100)),Y=O(()=>F.value?b.value>0?"warning":"success":""),q=O(()=>w.value&&_.value.length>0&&!P.value);function G(o){if(console.log("æå–URLï¼Œè¾“å…¥å€¼:",o,typeof o),!o)return[];const e=[],t=/https?:\/\/[^\s\u4e00-\u9fff]+/g;function s(l){return(l.match(t)||[]).map(n=>n.trim())}if(typeof o=="string"){const l=s(o);e.push(...l)}if(Array.isArray(o)){for(const l of o)if(typeof l=="string"){const a=s(l);e.push(...a)}else if(l&&typeof l=="object"){const a=["text","link","url","href","content","value"];for(const n of a)if(l[n]&&typeof l[n]=="string"){console.log(`ä» ${n} å±æ€§æå–æ–‡æœ¬:`,l[n]);const r=s(l[n]);e.push(...r)}if(l.content&&Array.isArray(l.content)){const n=G(l.content);e.push(...n)}}}if(typeof o=="object"){const l=["text","link","url","href","content","value"];for(const a of l)if(o[a]){const n=G(o[a]);e.push(...n)}}return[...new Set(e)]}function Z(o,e,t){if(console.log("æ™ºèƒ½æ›¿æ¢å‡½æ•°è¾“å…¥:",{originalContent:o,shortUrl:e,expandedUrl:t}),!o)return t;if(typeof o=="string"){const s=o.replace(new RegExp(N(e),"g"),t);return console.log("å­—ç¬¦ä¸²æ›¿æ¢ç»“æœ:",s),s}if(Array.isArray(o)){const s=o.map(l=>{if(typeof l=="string")return l.replace(new RegExp(N(e),"g"),t);if(l&&typeof l=="object"){const a={...l},n=["text","content","value","link","url","href"];for(const r of n)a[r]&&typeof a[r]=="string"&&(a[r]=a[r].replace(new RegExp(N(e),"g"),t));return a}return l});return console.log("æ•°ç»„æ›¿æ¢ç»“æœ:",s),s}if(typeof o=="object"){const s={...o},l=["text","content","value","link","url","href"];for(const a of l)s[a]&&typeof s[a]=="string"&&(s[a]=s[a].replace(new RegExp(N(e),"g"),t));return console.log("å¯¹è±¡æ›¿æ¢ç»“æœ:",s),s}return console.log("æœªçŸ¥ç±»å‹ï¼Œè¿”å›æ‰©å±•åçš„URL"),t}function N(o){return o.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}async function ee(){try{if(D.value="æ­£åœ¨åŠ è½½é£ä¹¦SDK...",!(typeof window<"u"&&(window.location.href.includes("feishu")||window.location.href.includes("lark")||window.location.hostname==="localhost"||window.location.hostname.startsWith("192.168"))))throw new Error("è¯·åœ¨é£ä¹¦å¤šç»´è¡¨æ ¼ä¸­ä½¿ç”¨æ­¤æ’ä»¶");const{bitable:e}=await de(async()=>{const{bitable:n}=await import("./BiuYIrBQ.js").then(r=>r.i);return{bitable:n}},__vite__mapDeps([0,1]),import.meta.url);if(g=e,D.value="æ­£åœ¨æ£€æŸ¥æƒé™...",!g||!g.base){if(window.location.hostname==="localhost"||window.location.hostname.startsWith("192.168")){console.warn("âš ï¸ å¼€å‘ç¯å¢ƒï¼šå¯ç”¨æ¨¡æ‹Ÿæ¨¡å¼"),D.value="å¼€å‘ç¯å¢ƒï¼šæ¨¡æ‹Ÿæ¨¡å¼",B.value="å½“å‰ä¸ºå¼€å‘ç¯å¢ƒï¼Œé£ä¹¦SDKåŠŸèƒ½ä¸å¯ç”¨ã€‚è¯·åœ¨é£ä¹¦å¤šç»´è¡¨æ ¼ä¸­ä½¿ç”¨æ­¤æ’ä»¶ã€‚";return}throw new Error("é£ä¹¦SDKæœªæ­£ç¡®åŠ è½½")}D.value="æ­£åœ¨è·å–å½“å‰è¡¨æ ¼...",I=await g.base.getActiveTable(),D.value="æ­£åœ¨åŠ è½½è¡¨æ ¼å­—æ®µ...";const t=await I.getFieldList(),s=[];console.log("è·å–åˆ°çš„å­—æ®µåˆ—è¡¨:",t);for(const n of t)try{const r=await n.getMeta();console.log("å­—æ®µå…ƒæ•°æ®:",r);let c=r.type;typeof c=="number"&&(c={1:"Text",2:"Number",3:"SingleSelect",4:"MultiSelect",5:"DateTime",7:"Checkbox",11:"Person",13:"Phone",15:"Url",17:"Attachment",18:"SingleLink",19:"Formula",20:"DuplexLink",21:"Location",22:"GroupChat",23:"CreatedTime",24:"ModifiedTime",25:"CreatedUser",26:"ModifiedUser"}[c]||`Unknown(${c})`),s.push({id:r.id,name:r.name,type:c})}catch(r){console.error("è·å–å­—æ®µå…ƒæ•°æ®å¤±è´¥:",r)}console.log("å¤„ç†åçš„å­—æ®µåˆ—è¡¨:",s),V.value=s,D.value="æ­£åœ¨åŠ è½½è¡¨æ ¼è®°å½•...";const l=await I.getRecords({pageSize:1e3});console.log("è·å–åˆ°çš„åŸå§‹è®°å½•åˆ—è¡¨:",l),console.log("è®°å½•æ•°é‡:",l.records?.length||0);const a=l.records.map((n,r)=>{console.log(`å¤„ç†è®°å½• ${r}:`,n);const c={recordId:n.recordId||n.id||`record_${r}`,...n.fields};return console.log(`å¤„ç†åçš„è®°å½• ${r}:`,c),c});M.value=a,console.log("æœ€ç»ˆçš„tableRecords:",M.value),H.value=!0,d.success("é£ä¹¦SDKåˆå§‹åŒ–æˆåŠŸï¼")}catch(o){console.error("é£ä¹¦SDKåˆå§‹åŒ–å¤±è´¥:",o),B.value=o instanceof Error?o.message:"åˆå§‹åŒ–å¤±è´¥",d.error("é£ä¹¦SDKåˆå§‹åŒ–å¤±è´¥: "+B.value)}}async function oe(){w.value&&await le()}async function le(){if(console.log("å¼€å§‹åˆ†æURLåŒ¹é…"),console.log("selectedFieldId:",w.value),console.log("tableRecordsæ•°é‡:",M.value.length),console.log("urlPattern:",K.value),!w.value||M.value.length===0){console.log("æ¡ä»¶ä¸æ»¡è¶³ï¼Œé€€å‡ºåˆ†æ"),_.value=[];return}const o=K.value.split(",").map(t=>t.trim()).filter(t=>t.length>0);console.log("è§£æåçš„åŒ¹é…æ¨¡å¼:",o);const e=[];for(let t=0;t<M.value.length;t++){const s=M.value[t];console.log(`æ£€æŸ¥è®°å½• ${t}:`,s);const l=s[w.value];console.log(`å­—æ®µ ${w.value} çš„å€¼:`,l,typeof l);const a=G(l);console.log("æå–åˆ°çš„URLs:",a);for(const n of a)if(n&&n.trim()){const r=n.trim();console.log("å¤„ç†åçš„URL:",r);const c=r.startsWith("http://")||r.startsWith("https://");if(console.log("æ˜¯å¦ä¸ºHTTP/HTTPS:",c),!c){console.log("è·³è¿‡éURLå†…å®¹:",r);continue}let i=!0;o.length>0?i=o.some(k=>{const u=r.includes(k);return console.log(`æ¨¡å¼ "${k}" åŒ¹é…ç»“æœ:`,u),u}):console.log("æ²¡æœ‰è®¾ç½®åŒ¹é…æ¨¡å¼ï¼ŒåŒ¹é…æ‰€æœ‰URL"),console.log("æœ€ç»ˆåŒ¹é…ç»“æœ:",i),i&&(console.log("æ·»åŠ åˆ°åŒ¹é…åˆ—è¡¨:",r),e.push({recordId:s.recordId||`record_${t}`,originalUrl:r,processing:!1,expanded:!1}))}}console.log("æœ€ç»ˆåŒ¹é…ç»“æœ:",e),_.value=e,d.success(`æ‰¾åˆ° ${e.length} ä¸ªåŒ¹é…çš„çŸ­é“¾æ¥`)}async function te(){if(!q.value){d.error("è¯·å…ˆé€‰æ‹©å­—æ®µå¹¶ç¡®ä¿æœ‰åŒ¹é…çš„çŸ­é“¾æ¥");return}P.value=!0,F.value=!1,z.value=_.value.length,j.value=0,A.value=0,b.value=0;try{for(let o=0;o<_.value.length;o++){const e=_.value[o];e.processing=!0;try{console.log(`æ­£åœ¨æ‰©å±•URL: ${e.originalUrl}`);const t=await $fetch("/api/url-expand/batch",{method:"POST",body:{urls:[e.originalUrl]}});if(console.log("APIå“åº”:",t),t.success&&t.results&&t.results[0]){const s=t.results[0];console.log("å¤„ç†ç»“æœ:",s),s.success&&s.expandedUrl?(e.expandedUrl=s.expandedUrl,e.expanded=!0,A.value++,console.log(`âœ… æ‰©å±•æˆåŠŸ: ${e.originalUrl} -> ${s.expandedUrl}`)):(e.error=s.error||"æ‰©å±•å¤±è´¥",b.value++,console.log(`âŒ æ‰©å±•å¤±è´¥: ${e.originalUrl}, é”™è¯¯: ${e.error}`))}else e.error="APIå“åº”æ ¼å¼é”™è¯¯",b.value++,console.log("âŒ APIå“åº”æ ¼å¼é”™è¯¯:",t)}catch(t){const s=t instanceof Error?t.message:"æ‰©å±•å¤±è´¥";e.error=s,b.value++,console.error(`âŒ è¯·æ±‚å¤±è´¥: ${e.originalUrl}, é”™è¯¯:`,t)}e.processing=!1,j.value++,await new Promise(t=>setTimeout(t,100))}F.value=!0,d.success(`å¤„ç†å®Œæˆï¼æˆåŠŸ ${A.value} æ¡ï¼Œå¤±è´¥ ${b.value} æ¡`)}catch(o){console.error("å¤„ç†å¤±è´¥:",o),d.error("å¤„ç†å¤±è´¥: "+(o instanceof Error?o.message:"æœªçŸ¥é”™è¯¯"))}finally{P.value=!1}}async function se(){const o=_.value.filter(e=>!e.expanded&&e.error);if(o.length===0){d.info("æ²¡æœ‰éœ€è¦é‡è¯•çš„å¤±è´¥é¡¹");return}X.value=!0;try{d.info(`å¼€å§‹é‡è¯• ${o.length} ä¸ªå¤±è´¥çš„URL`);let e=0,t=0;for(let s=0;s<o.length;s++){const l=o[s];l.processing=!0,l.error=void 0;try{console.log(`é‡è¯•æ‰©å±•URL: ${l.originalUrl}`);const a=await $fetch("/api/url-expand/batch",{method:"POST",body:{urls:[l.originalUrl]}});if(console.log("é‡è¯•APIå“åº”:",a),a.success&&a.results&&a.results[0]){const n=a.results[0];console.log("é‡è¯•å¤„ç†ç»“æœ:",n),n.success&&n.expandedUrl?(l.expandedUrl=n.expandedUrl,l.expanded=!0,e++,A.value++,b.value--,console.log(`âœ… é‡è¯•æˆåŠŸ: ${l.originalUrl} -> ${n.expandedUrl}`)):(l.error=n.error||"é‡è¯•æ‰©å±•å¤±è´¥",t++,console.log(`âŒ é‡è¯•å¤±è´¥: ${l.originalUrl}, é”™è¯¯: ${l.error}`))}else l.error="APIå“åº”æ ¼å¼é”™è¯¯",t++,console.log("âŒ é‡è¯•APIå“åº”æ ¼å¼é”™è¯¯:",a)}catch(a){const n=a instanceof Error?a.message:"é‡è¯•æ‰©å±•å¤±è´¥";l.error=n,t++,console.error(`âŒ é‡è¯•è¯·æ±‚å¤±è´¥: ${l.originalUrl}, é”™è¯¯:`,a)}l.processing=!1,await new Promise(a=>setTimeout(a,200))}e>0?d.success(`é‡è¯•å®Œæˆï¼æˆåŠŸ ${e} æ¡ï¼Œå¤±è´¥ ${t} æ¡`):d.warning(`é‡è¯•å®Œæˆï¼Œä½†æ²¡æœ‰æˆåŠŸçš„é¡¹ç›®ã€‚å¤±è´¥ ${t} æ¡`)}catch(e){console.error("é‡è¯•è¿‡ç¨‹å‡ºé”™:",e),d.error("é‡è¯•è¿‡ç¨‹å‡ºé”™: "+(e instanceof Error?e.message:"æœªçŸ¥é”™è¯¯"))}finally{X.value=!1}}async function ne(){if(!I||!g){d.error("é£ä¹¦SDKæœªåˆå§‹åŒ–");return}W.value=!0;try{console.log("å†™å›æ¨¡å¼:",T.value),console.log("é€‰ä¸­çš„å­—æ®µID:",w.value);let o=w.value;if(T.value==="newColumn"){console.log("ä½¿ç”¨æ–°å¢åˆ—æ¨¡å¼ï¼Œå°†åˆ›å»ºæ–°å­—æ®µ:",C.value);const n=V.value.map(c=>c.name),r=C.value;if(n.includes(r)){const c=V.value.find(i=>i.name===r);c&&(o=c.id,console.log(`å­—æ®µ"${r}"å·²å­˜åœ¨ï¼Œç›´æ¥ä½¿ç”¨ç°æœ‰å­—æ®µID:`,o),d.info(`å­—æ®µ"${r}"å·²å­˜åœ¨ï¼Œå°†ç›´æ¥è¦†ç›–å…¶ä¸­çš„æ•°æ®`))}else try{console.log("æ­£åœ¨åˆ›å»ºæ–°å­—æ®µ:",C.value),console.log("bitableå¯¹è±¡:",g),console.log("bitable.FieldType:",g.FieldType);let c,i="unknown";if(g.FieldType&&g.FieldType.Text)c=g.FieldType.Text,i="bitable.FieldType.Text";else if(g.FieldType&&g.FieldType.TEXT)c=g.FieldType.TEXT,i="bitable.FieldType.TEXT";else if(g.FieldType&&typeof g.FieldType=="object"){console.log("å¯ç”¨çš„å­—æ®µç±»å‹:",Object.keys(g.FieldType));const E=["Text","TEXT","SingleLineText","SINGLE_LINE_TEXT","text","string"];for(const $ of E)if(g.FieldType[$]){c=g.FieldType[$],i=`bitable.FieldType.${$}`;break}}c||(c=1,i="number 1 (fallback)"),console.log("ä½¿ç”¨çš„å­—æ®µç±»å‹:",c,"æ¥æº:",i);const k={type:c,name:C.value};console.log("å­—æ®µé…ç½®:",k);const u=await I.addField(k);if(console.log("åˆ›å»ºçš„æ–°å­—æ®µ:",u),console.log("æ–°å­—æ®µç±»å‹:",typeof u),console.log("æ–°å­—æ®µçš„å±æ€§:",Object.keys(u||{})),u&&u.id)o=u.id,console.log("ä»newField.idè·å–å­—æ®µID:",o);else if(u&&typeof u.getMeta=="function")o=(await u.getMeta()).id,console.log("ä»getMeta()è·å–å­—æ®µID:",o);else if(typeof u=="string")o=u,console.log("newFieldæœ¬èº«å°±æ˜¯å­—æ®µID:",o);else{const E=["fieldId","field_id","id","Id","ID"];for(const $ of E)if(u&&u[$]){o=u[$],console.log(`ä»${$}å±æ€§è·å–å­—æ®µID:`,o);break}if(!o)throw new Error("æ— æ³•è·å–æ–°åˆ›å»ºå­—æ®µçš„IDï¼ŒnewFieldç»“æ„: "+JSON.stringify(u))}console.log("æ–°å­—æ®µID:",o),d.success(`æˆåŠŸåˆ›å»ºæ–°åˆ—: ${C.value}`)}catch(c){console.error("åˆ›å»ºå­—æ®µå¤±è´¥:",c),d.error("åˆ›å»ºæ–°åˆ—å¤±è´¥: "+(c instanceof Error?c.message:"æœªçŸ¥é”™è¯¯"));return}}else console.log("ä½¿ç”¨åŸåˆ—æ›¿æ¢æ¨¡å¼ï¼Œå°†ç›´æ¥æ›´æ–°é€‰ä¸­çš„å­—æ®µ:",w.value);console.log("è·å–ç›®æ ‡å­—æ®µå¯¹è±¡ï¼Œå­—æ®µID:",o);const e=await I.getField(o);console.log("ç›®æ ‡å­—æ®µå¯¹è±¡:",e);const t=_.value.filter(n=>n.expanded&&n.expandedUrl);if(console.log(`å‡†å¤‡æ›´æ–° ${t.length} æ¡è®°å½•`),t.length===0){d.warning("æ²¡æœ‰æˆåŠŸæ‰©å±•çš„URLéœ€è¦å†™å›");return}let s=0,l=0;if(T.value==="newColumn")try{console.log("ä½¿ç”¨æ‰¹é‡æ“ä½œæ¨¡å¼æ›´æ–°æ•°æ®");const n=t.map(r=>({recordId:r.recordId,fields:{[o]:r.expandedUrl}}));await I.setRecords(n),s=t.length,console.log(`âœ… æ‰¹é‡æ›´æ–°æˆåŠŸ: ${s} æ¡è®°å½•`)}catch(n){console.warn("æ‰¹é‡æ›´æ–°å¤±è´¥ï¼Œå›é€€åˆ°å•æ¡æ›´æ–°æ¨¡å¼:",n),await a()}else await a();async function a(){for(let n=0;n<t.length;n++){const r=t[n];try{console.log(`æ›´æ–°è®°å½• ${n+1}/${t.length}:`),console.log("  recordId:",r.recordId),console.log("  originalUrl:",r.originalUrl),console.log("  expandedUrl:",r.expandedUrl);let c=r.expandedUrl||"";if(T.value==="inplace"){console.log("  ä½¿ç”¨åŸåˆ—æ›¿æ¢æ¨¡å¼ï¼Œè¯»å–åŸå§‹æ•°æ®è¿›è¡Œæ™ºèƒ½æ›¿æ¢");try{const i=await e.getValue(r.recordId);if(console.log("  åŸå§‹å­—æ®µå€¼:",i),r.expandedUrl)c=Z(i,r.originalUrl,r.expandedUrl);else{console.warn("  æ‰©å±•åçš„URLä¸ºç©ºï¼Œè·³è¿‡æ›¿æ¢");continue}console.log("  æ›¿æ¢åçš„å€¼:",c)}catch(i){console.warn("  è¯»å–åŸå§‹å€¼å¤±è´¥ï¼Œä½¿ç”¨ç›´æ¥è¦†ç›–æ¨¡å¼:",i),c=r.expandedUrl||""}}await e.setValue(r.recordId,c),console.log("  âœ… setValueæˆåŠŸ"),s++}catch(c){console.error(`æ›´æ–°è®°å½•å¤±è´¥ ${r.recordId}:`,c),console.error("é”™è¯¯è¯¦æƒ…:",{recordId:r.recordId,originalUrl:r.originalUrl,expandedUrl:r.expandedUrl,error:c.message}),l++}}}s>0?d.success(`æˆåŠŸå†™å› ${s} æ¡è®°å½•${l>0?`ï¼Œå¤±è´¥ ${l} æ¡`:""}`):d.error(`å†™å›å¤±è´¥ï¼Œæ‰€æœ‰ ${l} æ¡è®°å½•éƒ½æ›´æ–°å¤±è´¥`)}catch(o){console.error("å†™å›å¤±è´¥:",o),d.error("å†™å›å¤±è´¥: "+(o instanceof Error?o.message:"æœªçŸ¥é”™è¯¯"))}finally{W.value=!1}}function re(){const o=_.value.map(l=>({åŸé“¾æ¥:l.originalUrl,æ‰©å±•åé“¾æ¥:l.expandedUrl||"æ‰©å±•å¤±è´¥",çŠ¶æ€:l.expanded?"æˆåŠŸ":"å¤±è´¥",é”™è¯¯ä¿¡æ¯:l.error||""})),e=[Object.keys(o[0]).join(","),...o.map(l=>Object.values(l).join(","))].join(`
`),t=new Blob([e],{type:"text/csv;charset=utf-8;"}),s=document.createElement("a");s.href=URL.createObjectURL(t),s.download=`çŸ­é“¾æ¥æ‰©å±•ç»“æœ_${new Date().toISOString().slice(0,10)}.csv`,s.click(),d.success("ç»“æœå·²å¯¼å‡º")}return ie(async()=>{await ee()}),(o,e)=>{const t=ve,s=ye,l=we,a=he,n=be,r=_e,c=me,i=ke,k=xe,u=Te,E=$e,$=Ee,ae=Ue;return y(),L("div",Fe,[m(t,{title:"çŸ­é“¾æ¥æ‰¹é‡æ‰©å±•å·¥å…·",description:"æ™ºèƒ½è¯†åˆ«å¹¶æ‰©å±•çŸ­é“¾æ¥ï¼Œæ”¯æŒæ‰¹é‡å¤„ç†å’ŒåŸåˆ—æ›¿æ¢"}),H.value&&ue(I)?(y(),L("div",Le,[p("div",Re,[m(c,{class:"config-card"},{header:f(()=>[...e[4]||(e[4]=[p("div",{class:"card-header"},[p("div",{class:"header-icon"},[p("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[p("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 100 4m0-4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 100 4m0-4v2m0-6V4"})])]),p("div",{class:"header-content"},[p("h3",{class:"header-title"},"å¤„ç†é…ç½®"),p("p",{class:"header-desc"},"è®¾ç½®URLåŒ¹é…è§„åˆ™å’Œå¤„ç†æ–¹å¼")])],-1)])]),default:f(()=>[p("div",Se,[p("div",Ce,[m(s,{modelValue:K.value,"onUpdate:modelValue":e[0]||(e[0]=h=>K.value=h),placeholder:"åŒ¹é…è§„åˆ™: bit.ly, t.cn (ç•™ç©ºåŒ¹é…æ‰€æœ‰URL)",clearable:"",size:"default"},null,8,["modelValue"]),e[5]||(e[5]=p("div",{class:"help-text"}," å¤šä¸ªåŸŸåç”¨é€—å·åˆ†éš”ï¼Œç•™ç©ºåŒ¹é…æ‰€æœ‰URL ",-1))]),p("div",De,[m(a,{modelValue:w.value,"onUpdate:modelValue":e[1]||(e[1]=h=>w.value=h),placeholder:"é€‰æ‹©çŸ­é“¾æ¥åˆ—",filterable:"",size:"default",style:{width:"100%"},onChange:oe},{default:f(()=>[(y(!0),L(pe,null,ge(J.value,h=>(y(),R(l,{key:h.id,label:h.name,value:h.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),J.value.length===0?(y(),L("div",Pe," æœªæ‰¾åˆ°æ–‡æœ¬ç±»å‹çš„åˆ— ")):x("",!0)]),p("div",Me,[m(r,{modelValue:T.value,"onUpdate:modelValue":e[2]||(e[2]=h=>T.value=h),size:"default"},{default:f(()=>[m(n,{value:"inplace"},{default:f(()=>[...e[6]||(e[6]=[U("åŸåˆ—æ›¿æ¢",-1)])]),_:1}),m(n,{value:"newColumn"},{default:f(()=>[...e[7]||(e[7]=[U("æ–°å¢åˆ—",-1)])]),_:1})]),_:1},8,["modelValue"])]),T.value==="newColumn"?(y(),L("div",Ve,[m(s,{modelValue:C.value,"onUpdate:modelValue":e[3]||(e[3]=h=>C.value=h),placeholder:"æ–°åˆ—åç§°: æ‰©å±•åé“¾æ¥",clearable:"",size:"default"},null,8,["modelValue"])])):x("",!0)])]),_:1})]),w.value&&_.value.length>0?(y(),L("div",Ae,[m(c,null,{header:f(()=>[p("div",Ke,[e[8]||(e[8]=p("h3",null,"ğŸ“Š æ•°æ®é¢„è§ˆ",-1)),p("div",ze," æ‰¾åˆ° "+S(_.value.length)+" ä¸ªåŒ¹é…çš„çŸ­é“¾æ¥ ",1)])]),default:f(()=>[m(u,{data:_.value,stripe:"","max-height":"300",size:"small"},{default:f(()=>[m(i,{label:"åºå·",type:"index",width:"50"}),m(i,{label:"çŸ­é“¾æ¥",prop:"originalUrl","min-width":"150","show-overflow-tooltip":""}),m(i,{label:"çŠ¶æ€",width:"80"},{default:f(({row:h})=>[h.expanded?(y(),R(k,{key:0,type:"success",size:"small"},{default:f(()=>[...e[9]||(e[9]=[U("å·²æ‰©å±•",-1)])]),_:1})):h.processing?(y(),R(k,{key:1,type:"warning",size:"small"},{default:f(()=>[...e[10]||(e[10]=[U("å¤„ç†ä¸­",-1)])]),_:1})):(y(),R(k,{key:2,type:"info",size:"small"},{default:f(()=>[...e[11]||(e[11]=[U("å¾…å¤„ç†",-1)])]),_:1}))]),_:1}),m(i,{label:"æ‰©å±•åé“¾æ¥",prop:"expandedUrl","min-width":"200","show-overflow-tooltip":""})]),_:1},8,["data"])]),_:1})])):x("",!0),p("div",je,[m(c,null,{default:f(()=>[p("div",Ne,[m(E,{type:"primary",size:"large",onClick:te,disabled:!q.value,loading:P.value},{default:f(()=>[U(" ğŸš€ "+S(P.value?"æ­£åœ¨å¤„ç†...":"å¼€å§‹æ‰©å±•çŸ­é“¾æ¥"),1)]),_:1},8,["disabled","loading"]),F.value&&b.value>0?(y(),R(E,{key:0,type:"warning",size:"large",onClick:se,loading:X.value},{default:f(()=>[U(" ğŸ”„ é‡è¯•å¤±è´¥çš„ "+S(b.value)+" æ¡ ",1)]),_:1},8,["loading"])):x("",!0),F.value?(y(),R(E,{key:1,type:"success",size:"large",onClick:ne,loading:W.value},{default:f(()=>[U(" âœ… "+S(T.value==="inplace"?"å†™å›åŸåˆ—":"åˆ›å»ºæ–°åˆ—å¹¶å†™å›"),1)]),_:1},8,["loading"])):x("",!0),F.value?(y(),R(E,{key:2,size:"large",onClick:re},{default:f(()=>[...e[12]||(e[12]=[U(" ğŸ’¾ å¯¼å‡ºç»“æœ ",-1)])]),_:1})):x("",!0)]),P.value||F.value?(y(),L("div",Oe,[m($,{percentage:Q.value,status:Y.value,"stroke-width":8},null,8,["percentage","status"]),p("p",Be,[U(" å·²å¤„ç† "+S(j.value)+" / "+S(z.value)+" æ¡è®°å½• ",1),F.value?(y(),L("span",We," ï¼ˆæˆåŠŸ "+S(A.value)+" æ¡ï¼Œå¤±è´¥ "+S(b.value)+" æ¡ï¼‰ ",1)):x("",!0)])])):x("",!0),T.value==="inplace"&&w.value?(y(),R(ae,{key:1,title:"ğŸ”„ æ™ºèƒ½æ›¿æ¢æ¨¡å¼",type:"info",description:"åŸåˆ—æ›¿æ¢å°†æ™ºèƒ½æ›¿æ¢ï¼šä¿ç•™åŸå§‹æ•°æ®å†…å®¹ï¼Œä»…å°†çŸ­é“¾æ¥æ›¿æ¢ä¸ºæ‰©å±•åçš„é“¾æ¥ã€‚å»ºè®®å…ˆå¤‡ä»½é‡è¦æ•°æ®ã€‚","show-icon":"",class:"warning-alert"})):x("",!0)]),_:1})])])):x("",!0)])}}}),lo=fe(Xe,[["__scopeId","data-v-5cb8d904"]]);export{lo as default};
