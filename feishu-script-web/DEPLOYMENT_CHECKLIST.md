# ğŸ“‹ æœåŠ¡å™¨éƒ¨ç½²æ£€æŸ¥æ¸…å•

## ğŸ¯ **å¿…éœ€ä¸Šä¼ çš„æ–‡ä»¶**

### âœ… **æ ¸å¿ƒæ–‡ä»¶ï¼ˆå¿…é¡»ï¼‰**
- [ ] `.output/` ç›®å½•ï¼ˆå®Œæ•´ï¼‰
- [ ] `package.json`
- [ ] `.env` æˆ– `.env.production`

### ğŸ”§ **é…ç½®æ–‡ä»¶ï¼ˆæ¨èï¼‰**
- [ ] `ecosystem.config.js` (PM2é…ç½®)
- [ ] `start-with-ip.js` (IPè®¿é—®è„šæœ¬)

### ğŸ“„ **ç³»ç»ŸæœåŠ¡æ–‡ä»¶ï¼ˆå¯é€‰ï¼‰**
- [ ] `feishu-script.service` (Linuxç³»ç»ŸæœåŠ¡)

## ğŸš« **ä¸è¦ä¸Šä¼ çš„æ–‡ä»¶**

### âŒ **å¼€å‘æ–‡ä»¶**
- [ ] `node_modules/` (æœåŠ¡å™¨é‡æ–°å®‰è£…)
- [ ] `.nuxt/` (å¼€å‘ç¼“å­˜)
- [ ] `pages/`, `server/`, `components/` (æºä»£ç )
- [ ] `.git/`, `.vscode/` (ç‰ˆæœ¬æ§åˆ¶å’Œç¼–è¾‘å™¨)

## ğŸš€ **å¿«é€Ÿéƒ¨ç½²å‘½ä»¤**

### 1. åˆ›å»ºéƒ¨ç½²åŒ…
```bash
npm run package
```

### 2. ä¸Šä¼ åˆ°æœåŠ¡å™¨
```bash
# ä¸Šä¼  deploy-package/ ç›®å½•ä¸­çš„æ‰€æœ‰æ–‡ä»¶
scp -r deploy-package/* user@server:/path/to/app/
```

### 3. æœåŠ¡å™¨æ“ä½œ
```bash
# å®‰è£…ä¾èµ–
npm install --production

# é…ç½®ç¯å¢ƒå˜é‡
nano .env

# å¯åŠ¨åº”ç”¨
pm2 start ecosystem.config.js
```

## ğŸ“Š **æ–‡ä»¶å¤§å°å‚è€ƒ**

| æ–‡ä»¶/ç›®å½• | å¤§å° | è¯´æ˜ |
|-----------|------|------|
| `.output/` | ~50MB | æ„å»ºäº§ç‰© |
| `package.json` | ~1KB | ä¾èµ–é…ç½® |
| `ecosystem.config.js` | ~1KB | PM2é…ç½® |
| `.env` | <1KB | ç¯å¢ƒå˜é‡ |

## ğŸ” **éƒ¨ç½²éªŒè¯**

### æœåŠ¡å™¨æ£€æŸ¥é¡¹
- [ ] Node.js ç‰ˆæœ¬ >= 18
- [ ] ç«¯å£3030å¯ç”¨
- [ ] é˜²ç«å¢™é…ç½®æ­£ç¡®
- [ ] ç¯å¢ƒå˜é‡è®¾ç½®å®Œæ•´

### åº”ç”¨æ£€æŸ¥é¡¹
- [ ] æœåŠ¡å¯åŠ¨æˆåŠŸ
- [ ] å¥åº·æ£€æŸ¥é€šè¿‡: `/api/health`
- [ ] ä¸»é¡µè®¿é—®æ­£å¸¸: `/`
- [ ] æ’ä»¶åŠŸèƒ½æ­£å¸¸: `/scripts/url-expander-plugin`

## ğŸ†˜ **å¸¸è§é—®é¢˜**

### ç«¯å£è¢«å ç”¨
```bash
# æŸ¥çœ‹ç«¯å£å ç”¨
netstat -tulpn | grep :3030
# æˆ–
lsof -i :3030
```

### PM2æœåŠ¡å¼‚å¸¸
```bash
# æŸ¥çœ‹æ—¥å¿—
pm2 logs feishu-script

# é‡å¯æœåŠ¡
pm2 restart feishu-script
```

### æƒé™é—®é¢˜
```bash
# ä¿®æ”¹æ–‡ä»¶æƒé™
chmod +x .output/server/index.mjs
chown -R www-data:www-data /path/to/app
```
