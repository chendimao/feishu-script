import{d as B,b,c as o,e as t,j as k,w as x,h as w,f as d,k as U,t as y,a as _,m as C,y as M,E as n,q as S,s as l,x as V}from"./index-Drx1IuvM.js";import{c as T,u as c,s as A,g as E}from"./client-6-I-OaSH.js";const I={class:"settings-page"},N={class:"settings-content"},D={class:"setting-card"},P={class:"form-group"},F={class:"action-bar"},H=["disabled"],R={key:0,width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},j={key:1,class:"loading-dot"},q=B({__name:"SettingsView",setup(z){const p=S(),e=_(!1),a=C({apiBaseUrl:"https://aiti.xin:5003/api"});function u(){p.back()}function v(){a.apiBaseUrl&&(a.apiBaseUrl.startsWith("http")||(a.apiBaseUrl="http://"+a.apiBaseUrl),r())}async function g(){try{await M.confirm("确定要重置 API 地址吗？这将清除缓存的配置。","确认重置",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}),T(),a.apiBaseUrl="http://aiti.xin:5004",c(),n.success("设置已重置")}catch{}}function r(){const i={apiBaseUrl:a.apiBaseUrl};A(i),c()}function h(){const i=E();a.apiBaseUrl=i.apiBaseUrl}async function f(){e.value=!0;try{r(),setTimeout(()=>{e.value=!1,n.success("设置已保存")},600)}catch(i){console.error("保存设置失败:",i),e.value=!1,n.error("保存失败，请重试")}}return b(()=>{h()}),(i,s)=>(l(),o("div",I,[t("header",{class:"page-header"},[t("button",{class:"back-btn",onClick:u},[...s[1]||(s[1]=[t("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M19 12H5M12 19l-7-7 7-7"})],-1)])]),s[2]||(s[2]=t("h1",{class:"page-title"},"设置",-1)),s[3]||(s[3]=t("div",{class:"header-spacer"},null,-1))]),t("main",N,[t("section",D,[s[6]||(s[6]=k('<div class="card-title" data-v-3696b601><div class="title-icon blue" data-v-3696b601><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-3696b601><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71" data-v-3696b601></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71" data-v-3696b601></path></svg></div><span data-v-3696b601>API 配置</span></div>',1)),t("div",P,[s[4]||(s[4]=t("label",{class:"form-label"},"基础地址",-1)),x(t("input",{"onUpdate:modelValue":s[0]||(s[0]=m=>a.apiBaseUrl=m),type:"text",class:"form-input enhanced",placeholder:"http://aiti.xin:5004",onBlur:v},null,544),[[w,a.apiBaseUrl]]),s[5]||(s[5]=t("p",{class:"form-hint"},"飞书 API 服务地址",-1))])]),t("div",F,[t("button",{class:"btn-secondary",onClick:g},"重置"),t("button",{class:"btn-primary",onClick:f,disabled:e.value},[e.value?d("",!0):(l(),o("svg",R,[...s[7]||(s[7]=[t("path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"},null,-1),t("polyline",{points:"17 21 17 13 7 13 7 21"},null,-1),t("polyline",{points:"7 3 7 8 15 8"},null,-1)])])),e.value?(l(),o("span",j)):d("",!0),U(" "+y(e.value?"保存中":"保存"),1)],8,H)])])]))}}),$=V(q,[["__scopeId","data-v-3696b601"]]);export{$ as default};
